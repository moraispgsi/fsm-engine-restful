/**
 * Created by Ricardo Morais on 27/03/2017.
 */


let core =  require('./index')('mysql', 'localhost', 'root', 'root', 'mydatabase');
let co = require('co');
core.sequelize.sync().then(function() {
    co(function*(){
        let action = yield core.action.createAction("action1", [{name: 'log', type: 'string'}]);
        let parameters = [];
        let parametersResult = yield core.query.getActionParameters(action.dataValues.id);
        for(let param of parametersResult) {
            parameters.push({
                id: param.dataValues.id,
                name: param.dataValues.name,
                type: param.dataValues.type
            });
        }
        console.log(parameters);
        try {

            let actionCall1 = yield core.action.createActionCall(action.dataValues.id, {
                log: "log this"
            });
            let actionCall2 = yield core.action.createActionCall(action.dataValues.id, {
                log: "log that"
            });

        } catch (error) {
            console.log('error here');
        }
    });
});

